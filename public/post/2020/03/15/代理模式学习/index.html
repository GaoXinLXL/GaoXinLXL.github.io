<!DOCTYPE html>
<html lang="en-us">
  <head>

    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/images/site.webmanifest">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A simple, minimal blog for those who love text.">
    <title>ä»£ç†æ¨¡å¼å­¦ä¹  | Classic</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="https://gaoxinlxl.github.io/css/theme-override.css">
    <header>

  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://gaoxinlxl.github.io/">~/classic</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="/categories/">~/categories</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="/tags/">~/tags</a>
      </li>
      

      
      
      <li class="pull-right">
        <a href="/index.xml">~/subscribe</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">ä»£ç†æ¨¡å¼å­¦ä¹ </span></h1>

<h2 class="date">2020/03/15</h2>
<p class="terms">
  
  
  Categories: <a href="/categories/%E7%AC%94%E8%AE%B0">ç¬”è®°</a> 
  
  
  
  Tags: <a href="/tags/java">Java</a> 
  
  
</p>
</div>


<div class="content-wrapper">
  <main>
    <h1 id="é™æ€ä»£ç†-é™æ€ä»£ç†é™æ€ä»£ç†"><a href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h1>
<ol>
<li>
<p>åˆ›å»ºæ¥å£</p>
</li>
<li>
<p>åˆ›å»ºè¢«ä»£ç†ç±»</p>
<p>å®ç°æ¥å£</p>
</li>
<li>
<p>åˆ›å»ºä»£ç†ç±»</p>
<p>ä¹Ÿè¦å®ç°åŒæ ·çš„æ¥å£ï¼ŒåŒæ—¶è¿˜è¦æŒæœ‰è¢«ä»£ç†å¯¹è±¡çš„å¼•ç”¨</p>
</li>
<li>
<p>ä»£ç†ç±»å‘æŒ¥ä½œç”¨</p>
<p>ä»£ç†ç±»æ‰§è¡Œæ–¹æ³•ï¼ˆå…¶å®çœŸæ­£æ‰§è¡Œçš„æ ¸å¿ƒæ–¹æ³•æ˜¯è¢«ä»£ç†ç±»çš„æ–¹æ³•ï¼‰</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Print</span><span style="color:#f92672">{</span><span style="color:#75715e">//æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Printer</span> <span style="color:#66d9ef">implements</span> Print<span style="color:#f92672">{</span><span style="color:#75715e">//è¢«ä»£ç†ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°ä¸­ã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ProxyPrinter</span> <span style="color:#66d9ef">implements</span> Print<span style="color:#f92672">{</span><span style="color:#75715e">//ä»£ç†ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> Printer printer<span style="color:#f92672">;</span><span style="color:#75715e">//è¦å¾—åˆ°è¢«ä»£ç†ç±»çš„å¼•ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ProxyPrinter<span style="color:#f92672">(</span>Printer printer<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">printer</span> <span style="color:#f92672">=</span> printer<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°å‰ã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        printer<span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">();</span><span style="color:#75715e">//è°ƒç”¨è¢«ä»£ç†ç±»çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°åã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        Print p <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ProxyPrinter<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Printer<span style="color:#f92672">());</span><span style="color:#75715e">//è¿™é‡Œç”¨äº†å‘ä¸Šè½¬å‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        p<span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°å‰ã€‚ã€‚ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°ä¸­ã€‚ã€‚ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°åã€‚ã€‚ã€‚</span>
</span></span></code></pre></div><h1 id="åŠ¨æ€ä»£ç†-åŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†"><a href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h1>
<p>å’Œé™æ€ä»£ç†ç›¸æ¯”ï¼Œåˆ›å»ºæ¥å£ã€åˆ›å»ºçœŸå®çš„è¢«ä»£ç†ç±»éƒ½ä¸å˜ã€‚</p>
<ol>
<li>åˆ›å»ºæ¥å£</li>
<li>åˆ›å»ºè¢«ä»£ç†ç±»</li>
</ol>
<p>å®ç°æ¥å£</p>
<ol start="3">
<li>åˆ›å»ºä¸€ä¸ªå®ç°InvocationHandleræ¥å£çš„ç±»ï¼ˆä¸ºäº†å¥½è®°ï¼Œæˆ‘å«å®ƒæ‹¦æˆªç±»ï¼Œå¯ä»¥æ‹¦æˆªè¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼‰</li>
</ol>
<p>è·Ÿé™æ€ä»£ç†é‡Œé¢ä»£ç†ç±»ä¸€æ ·ï¼Œè¦è·å¾—è¢«ä»£ç†ç±»å¯¹è±¡çš„å¼•ç”¨ï¼ˆä½†ä¸æ˜¯ä»£ç†ç±»ï¼‰<br>
è¿˜å¿…é¡»å®ç°invoke()æ–¹æ³•ï¼Œè¿™é‡Œé¢å¯ä»¥å¯¹è¢«ä»£ç†ç±»çš„æ–¹æ³•è¿›è¡Œå¢å¼º</p>
<ol start="4">
<li>å¦‚ä½•è¿ç”¨ï¼Ÿ</li>
</ol>
<p>åˆ›å»ºæ‹¦æˆªç±»å¯¹è±¡ï¼Œä¼ å…¥çœŸå®çš„è¢«ä»£ç†ç±»å¯¹è±¡<br>
ç”±Proxyç±»çš„é™æ€æ–¹æ³•_newProxyInstance(3ä¸ªå‚æ•°)è·å¾—çœŸæ­£çš„ä»£ç†å¯¹è±¡ï¼Œå¹¶å‘ä¸Šè½¬å‹ä¸ºæ¥å£ç±»å‹_<br>
<em>ä»£ç†ç±»å¯¹è±¡æ‰§è¡Œæ–¹æ³•</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Print</span><span style="color:#f92672">{</span><span style="color:#75715e">//æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Printer</span> <span style="color:#66d9ef">implements</span> Print<span style="color:#f92672">{</span><span style="color:#75715e">//è¢«ä»£ç†ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°ä¸­ã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ProxyInvocationHandler</span> <span style="color:#66d9ef">implements</span> InvocationHandler<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *  è¢«ä»£ç†çš„å¼•ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *  è¿™é‡Œç”¨Printer printerä¹Ÿå¯ä»¥è¿è¡Œï¼Œä½†æ²¡æœ‰ç”¨objectæœ‰æ„ä¹‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *  è¿™æ ·æ›´çµæ´»ï¼Œæ‰èƒ½ä½“ç°åŠ¨æ€ä»£ç†çš„åŠ¨æ€
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Object object<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ProxyInvocationHandler<span style="color:#f92672">(</span>Object object<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">object</span> <span style="color:#f92672">=</span> object<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>Object proxy<span style="color:#f92672">,</span> Method method<span style="color:#f92672">,</span> Object<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Throwable <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°å‰ã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Object result <span style="color:#f92672">=</span> method<span style="color:#f92672">.</span><span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>object<span style="color:#f92672">,</span>args<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æ‰“å°åã€‚ã€‚ã€‚&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        ProxyInvocationHandler pih <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ProxyInvocationHandler<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Printer<span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>        Print printer <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Print<span style="color:#f92672">)</span>Proxy<span style="color:#f92672">.</span><span style="color:#a6e22e">newProxyInstance</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>            Printer<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getClassLoader</span><span style="color:#f92672">(),</span>Printer<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getInterfaces</span><span style="color:#f92672">(),</span>pih<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        printer<span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°å‰ã€‚ã€‚ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°ä¸­ã€‚ã€‚ã€‚</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">æ‰“å°åã€‚ã€‚ã€‚</span>
</span></span></code></pre></div><p>å¯¹äºåŠ¨æ€ä»£ç†ï¼Œé‡ç‚¹è¦ç†è§£ä¸‹é¢2ä¸ªæ–¹æ³•ï¼š</p>
<p>ğŸ”¨Proxy.newProxyInstance(3ä¸ªå‚æ•°)æ–¹æ³•<br>
æ­¤æ–¹æ³•ç”¨äºç”ŸæˆçœŸæ­£çš„ä»£ç†å¯¹è±¡</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> Object    <span style="color:#a6e22e">newProxyInstance</span><span style="color:#f92672">(</span>ClassLoader loader<span style="color:#f92672">,</span> <span style="color:#960050;background-color:#1e0010">ç±»</span><span style="color:#f92672">&lt;?&gt;[]</span> interfaces<span style="color:#f92672">,</span> InvocationHandler h<span style="color:#f92672">)</span> 
</span></span></code></pre></div><p>3ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>loader è¢«ä»£ç†ç±»ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„ç±»åŠ è½½å™¨</li>
<li>interface ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£</li>
<li>h â€œæ‹¦æˆªç±»â€å¯¹è±¡</li>
</ol>
<p>æ³¨æ„è¿”å›çš„çœŸæ­£çš„ä»£ç†å¯¹è±¡éœ€è¦è½¬å‹ã€‚</p>
<p>ğŸ”¨â€œæ‹¦æˆªç±»â€é‡Œå¿…é¡»é‡å†™çš„invoke(å‚æ•°)æ–¹æ³•<br>
å…¶å®å°±æ˜¯è¦ç†è§£method.invoke(å‚æ•°)ï¼Œåˆ©ç”¨äº†åå°„ï¼Œå¯ä»¥ç®€å•åœ°è®¤ä¸ºç”¨æ¥æ‰§è¡ŒæŸä¸ªçš„å¯¹è±¡çš„ç›®æ ‡æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>Object obj<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                     Object<span style="color:#f92672">...</span> args<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">throws</span> IllegalAccessException<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                     IllegalArgumentException<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                     InvocationTargetException
</span></span></code></pre></div><h1 id="classloaderæ˜¯å¹²ä»€ä¹ˆçš„-classloaderæ˜¯å¹²ä»€ä¹ˆçš„classloaderæ˜¯å¹²ä»€ä¹ˆçš„"><a href="#ClassLoader%E6%98%AF%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F" title="ClassLoaderæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"></a>ClassLoaderæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</h1>
<p>å®ƒæ˜¯ç”¨æ¥åŠ è½½ Class çš„ã€‚å®ƒè´Ÿè´£å°† Class çš„å­—èŠ‚ç å½¢å¼è½¬æ¢æˆå†…å­˜å½¢å¼çš„ Class å¯¹è±¡ã€‚å­—èŠ‚ç å¯ä»¥æ¥è‡ªäºç£ç›˜æ–‡ä»¶ *.classï¼Œä¹Ÿå¯ä»¥æ˜¯ jar åŒ…é‡Œçš„ *.classç­‰ã€‚å­—èŠ‚ç çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ []byteã€‚</p>
<blockquote>
<p>æ¯ä¸ª Class å¯¹è±¡é‡Œé¢éƒ½æœ‰ä¸€ä¸ª classLoader å±æ€§è®°å½•äº†å½“å‰çš„ç±»æ˜¯ç”±è°æ¥åŠ è½½çš„ã€‚</p>
</blockquote>
<p>âœ¨3ä¸ªé‡è¦çš„ClassLoader<br>
JVM ä¸­å†…ç½®äº†ä¸‰ä¸ªé‡è¦çš„ ClassLoaderï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>
<p>BootstrapClassLoader</p>
</li>
<li>
<p>ExtensionClassLoader</p>
</li>
<li>
<p>AppClassLoaderã€‚</p>
<blockquote>
<p>BootstrapClassLoader è´Ÿè´£åŠ è½½ JVM è¿è¡Œæ—¶æ ¸å¿ƒç±»ï¼Œè¿™äº›ç±»ä½äº JAVA_HOME/lib/rt.jar æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨å†…ç½®åº“ java.xxx.* éƒ½åœ¨é‡Œé¢ï¼Œæ¯”å¦‚ java.util.<em>ã€java.io.</em>ã€java.nio.<em>ã€java.lang.</em> ç­‰ç­‰ã€‚è¿™ä¸ª ClassLoader æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯ç”± C ä»£ç å®ç°çš„ï¼Œæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸ºã€Œæ ¹åŠ è½½å™¨ã€ã€‚</p>
</blockquote>
</li>
</ul>
<p>ğŸ’¤</p>
<blockquote>
<p>ExtensionClassLoader è´Ÿè´£åŠ è½½ JVM æ‰©å±•ç±»ï¼Œæ¯”å¦‚ swing ç³»åˆ—ã€å†…ç½®çš„ js å¼•æ“ã€xml è§£æå™¨ ç­‰ç­‰ï¼Œè¿™äº›åº“åé€šå¸¸ä»¥ javax å¼€å¤´ï¼Œå®ƒä»¬çš„ jar åŒ…ä½äº JAVA_HOME/lib/ext/*.jar ä¸­ï¼Œæœ‰å¾ˆå¤š jar åŒ…ã€‚</p>
</blockquote>
<p>ğŸ’¦</p>
<blockquote>
<p>AppClassLoader æ‰æ˜¯ç›´æ¥é¢å‘æˆ‘ä»¬ç”¨æˆ·çš„åŠ è½½å™¨ï¼Œå®ƒä¼šåŠ è½½ Classpath ç¯å¢ƒå˜é‡é‡Œå®šä¹‰çš„è·¯å¾„ä¸­çš„ jar åŒ…å’Œç›®å½•ã€‚æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç ä»¥åŠä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ jar åŒ…é€šå¸¸éƒ½æ˜¯ç”±å®ƒæ¥åŠ è½½çš„ã€‚</p>
</blockquote>
<h1 id="åŒäº²å§”æ´¾-åŒäº²å§”æ´¾åŒäº²å§”æ´¾"><a href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE" title="åŒäº²å§”æ´¾"></a>åŒäº²å§”æ´¾</h1>
<blockquote>
<p>æ¯ä¸ª ClassLoader éƒ½å¾ˆæ‡’ï¼Œå°½é‡æŠŠå·¥ä½œäº¤ç»™çˆ¶äº²åšï¼Œçˆ¶äº²å¹²ä¸äº†äº†è‡ªå·±æ‰ä¼šå¹²ã€‚æ¯ä¸ª ClassLoader å¯¹è±¡å†…éƒ¨éƒ½ä¼šæœ‰ä¸€ä¸ª parent å±æ€§æŒ‡å‘å®ƒçš„çˆ¶åŠ è½½å™¨ã€‚</p>
</blockquote>
<p>ğŸ›´</p>
<blockquote>
<p>AppClassLoader åœ¨åŠ è½½ä¸€ä¸ªæœªçŸ¥çš„ç±»åæ—¶ï¼Œå®ƒå¹¶ä¸æ˜¯ç«‹å³å»æœå¯» Classpathï¼Œå®ƒä¼šé¦–å…ˆå°†è¿™ä¸ªç±»åç§°äº¤ç»™ ExtensionClassLoader æ¥åŠ è½½ï¼Œå¦‚æœ ExtensionClassLoader å¯ä»¥åŠ è½½ï¼Œé‚£ä¹ˆ AppClassLoader å°±ä¸ç”¨éº»çƒ¦äº†ã€‚å¦åˆ™å®ƒå°±ä¼šæœç´¢ Classpath ã€‚<br>
è€Œ ExtensionClassLoader åœ¨åŠ è½½ä¸€ä¸ªæœªçŸ¥çš„ç±»åæ—¶ï¼Œå®ƒä¹Ÿå¹¶ä¸æ˜¯ç«‹å³æœå¯» ext è·¯å¾„ï¼Œå®ƒä¼šé¦–å…ˆå°†ç±»åç§°äº¤ç»™ BootstrapClassLoader æ¥åŠ è½½ï¼Œå¦‚æœ BootstrapClassLoader å¯ä»¥åŠ è½½ï¼Œé‚£ä¹ˆ ExtensionClassLoader ä¹Ÿå°±ä¸ç”¨éº»çƒ¦äº†ã€‚å¦åˆ™å®ƒå°±ä¼šæœç´¢ ext è·¯å¾„ä¸‹çš„ jar åŒ…ã€‚</p>
</blockquote>
<h1 id="getinterfaces-getinterfacesgetinterfaces"><a href="#getInterfaces" title="getInterfaces()"></a>getInterfaces()</h1>
<p>ä»¥ä¸‹æ˜¯**java.lang.Class.getInterfaces()**æ–¹æ³•çš„å£°æ˜</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Class<span style="color:#f92672">&lt;?&gt;[]</span> getInterfaces<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>æ­¤æ–¹æ³•è¿”å›è¿™ä¸ªç±»ä¸­å®ç°æ¥å£çš„æ•°ç»„ã€‚</p>

    <a href="/"> >> Home</a>
  </main>
</div>
    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
      <hr/>
      Open-Source | <a href="https://github.com/goodroot/hugo-classic">Github</a> | <a href="https://keybase.io/goodroot">Keybase</a>
      
    </footer>
  </body>
</html>

